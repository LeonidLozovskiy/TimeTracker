## Wpf приложенье для упрощения треканья времени в jira

![TimeTracker.png](./ReadmeResources/TimeTracker.png?raw=true "TimeTracker.png")
1. Время которое нужно сегодня залогировать в минутах. Можно изменить в случае если сокращенный день или почему то не доработали
2. Номер таски которая будет добавлена по нажатию кнопки "ADD"(3). Копируется из урла в jira. Лишние пробелы будут удалены, но / и прочие спец символы останутся. 
3. Кнопка добавляющая запись в список на логирование. Берет номер таски из поля 2 и в комментарий вставляет выделенный тег из поля 5
4. Кнопка создания запись для "влетов" номер берется из файла настроек (MiscTask), все остальное аналогично 3.
5. Лист тегов. Значения берутся из файла настроек (Tags).
6. Номер таски в которую залогируется запись
7. Комментарий с которым залогируется запись
8. Время которое нужно записать в минутах. Если оставить поле пустым, то оставшееся не распределенным время равномерно распределится между всеми задачами где не указано время.
9. Время которое реально добавится в запись. Если останется не распределенное за день время оно или распределится между записями с незаполненым временем, если такие есть или спишется в последнюю запись в списке. 
10. Кнопка для удаления записи. Запись с административной задачей нельзя удалить. Она создается по-умолчанию.
11. Чекбокс показывающий была ли таска залогирована. Если оставить таску заполненым чекбоксом, она будет влиять на распределение времени, но не будет залогирована при запросе.
12. Обратный отсчет до автоматического логирования всех созданых записей. Запускается при нажатии на кнопку Старт Таймер(15) на 8 часов. Но сработает в 23.55, чтобы случайно не затрекать данные на другую дату. Пользоваться с осторожностью, если комп уйдет в сон просто не сработает. 
13. Даты с крестиком в календаре показывают на какие даты затрекано 8 часов. Даты обновляются только при перезапуске приложеньки. Контрол календаря в впф просто отвратительный :)  Для сокращенных дней когда мы трекаем по 7 часов крестика не будет. Слишком много мороки для доработки этого функционала. Даты с крестиком не кликабельны
14. Выбраная дата на которую будет затрекано время. При запуске всегда совпадает с текущей датой. 
15. Кнопка запуска таймера
16. Кнопка которая сразу залогирует все записи. Во время логирования левая часть интерфейса блокируется во избежании неконсистентных результатов. После нажатия на кнопку изменить данные уже нельзя.
17.  История логирований глубина истории указывается в настройках (HistoryDepth). Если указывать слишком большое число дольше грузится приложение из-за необходимости помечать все полностью затреканные даты в календаре. История загружается из файла History.db, если его нет он создастся автоматически. Она хранится исключительно локально и никак не синхронизируется с jira. 
### Для работы необходимо иметь установленный сертификат для jira.mercury.ru в системе и получить апи токен

## Получения api токена 
1. открыть настройки профиля в jira
![Jira](./ReadmeResources/jiraProfile.png?raw=true "Jira")
2. нажать на кнопку создать токен.
3. скопировать токен в настройки

## Файл настроек appsetting.json
``` 
  "Settings": {
    "Authorization": "", // апи ключ для jira.
    "AdministrativeTask": "", // Номер административной задачи
    "Jira": "jira.mercury.ru", // урл jira 
    "AdministrativeMessage": "#административка", // значение по умолчанию для записи в административку
    "MiscTask": "SP-933", // номер таски для влетов
    "Tags": [ // теги для задач
      "административка",
      "декомпозиция",
      "ресерч",
      "разработка",
      "ревью",
      "деплой",
      "тестирование",
      "смоук",
      "регресс",
      "помощь_коллегам",
      "онбординг",
      "собеседование"
    ],
    "HistoryDepth" :  60 // глубина истории выгружаемая из файла бд
  }
```
